9.4 堆栈的理解

在讲Go的堆栈之前，先温习一下堆栈基础知识。

什么是堆栈？在计算机中堆栈的概念分为：数据结构的堆栈和内存分配中堆栈。

数据结构的堆栈：

堆：堆可以被看成是一棵树，如：[堆排序](https://baike.baidu.com/item/%E5%A0%86%E6%8E%92%E5%BA%8F/2840151?fr=aladdin)。在队列中，调度程序反复提取队列中第一个作业并运行，因为实际情况中某些时间较短的任务将等待很长时间才能结束，或者某些不短小，但具有重要性的作业，同样应当具有优先权。堆即为解决此类问题设计的一种数据结构。

栈：一种先进后出的数据结构。

这里着重讲的是内存分配中的堆和栈。

内存分配中的堆和栈

栈（操作系统）：由操作系统自动分配释放 ，存放函数的参数值，局部变量的值等。其操作方式类似于数据结构中的栈。

堆（操作系统）： 一般由程序员分配释放， 若程序员不释放，程序结束时可能由OS回收，分配方式倒是类似于链表。

### 堆栈缓存方式

栈使用的是一级缓存， 他们通常都是被调用时处于存储空间中，调用完毕立即释放。

堆则是存放在二级缓存中，生命周期由[虚拟机](https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=171478&ss_c=ssc.citiao.link)的垃圾回收算法来决定（并不是一旦成为孤儿对象就能被回收）。所以调用这些对象的速度要相对来得低一些。



参考资料：

https://www.ardanlabs.com/blog/2015/01/stack-traces-in-go.html

https://zhuanlan.zhihu.com/p/28484133



## links

- [目录](https://github.com/guyan0319/golang_development_notes/blob/master/zh/preface.md)
- 上一节：
- 下一节：

